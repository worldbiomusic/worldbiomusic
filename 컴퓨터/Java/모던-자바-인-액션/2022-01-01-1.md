---
title: "모던 자바 인 액션 정리: 1"
date: 2020-01-01 00:00:00 +09:00
categories: ['컴퓨터', 'Java', '모던-자바-인-액션']
tags: [Java]
---

# 1.1 역사의 흐름
자바 8에서는 `간결한 코드`와 `멀티코어 프로세서 활용`이 중점적이다
- 스트림 API
- 메서드 참조와 람다 (동작 파라미터화)
- 인터페이스의 디폴트 메서드
> 이중 메서드 참조와 인터페이스 디폴트 메서드는 스트림 API에서 많이 사용된다

8전까지는 대부분 자바 프로그램은 1개 cpu를 사용했지만, 이제는 상황은 한정되어있지만 병렬 프로그래밍을 간단한 방식으로 지원한다. 함수형 프로그래밍에서 주로 사용하는 기법들 위주로 업데이트 됨.


# 1.2 왜 아직도 자바는 변화하나
언어는 자연 생태계와 비슷해서 새로 생겨나기도 도태되기도 함.
> 자바는 객체지향의 정신적인 모델로 대중적으로 사용됬다

하지만 언어 생태계에 큰 데이터를 빠르게 처리해야 할, 그리고 빠른 생산성의 중요도 증가의 변화가 불었다. 그래서 밑의 리스트들의 요소를 업데이트했다
- 스트림: 하려는 작업들을 미리 만들어놓은 메서드로 추상화해서 간단히 표현해서 처리
- 메서드의 동작 파라미터화: 주로 스트림에서 사용되는 기법
- 병렬성: 병렬성은 함수형 프로그래밍 기법에서 순수 함수로 얻을 수 있음 (대신 공유 가변 데이터 접근 불가의 조건이 필요)


# 1.3 자바 함수
자바는 보통 함수를 메서드라는 이름으로 사용해왔다. 그런데 함수형 프로그래밍 기법을 도입하면서 자바 내에서 함수는 side-effect가 없는 순수 함수를 지칭한다.

지금까지는 기본 값(int, double)만 참조해서 변경할 수 있었지만, 메서드 자체를 값으로 간주하는 일급시민으로 바꾸어서 함수형 기법에 맞게 사용될 수 있게 했다.

`new File(".").listFiles(File::isHidden) // 미리 선언된 메서드를 값으로써 넘겼다`
`new File(".").listFiles(f -> f.isHidden()) // 또는 람다를 이용해서 만들어서 넘기기`


하지만 람다가 몇 줄 이상으로 길어지면 미리 클래스를 선언해서 사용하는것이 좋다 (`명확성` 우선)


# 1.4 스트림
보통 프로그램은 컬렉션을 많이 사용한다. 그리고 컬렉션은 대부분 반복문에서 많이 사용된다. 이 때 for문으로 처리하는 것을 `외부 반복`이고, 스트림으로 내부에서 처리하는 것을 `내부 반복`이라 한다. 

스트림의 주요 해결 문제는 
- 반복적 코드
- 병렬 실행
을 해결했다

주로 사용되는 필터링, 추출, 그룹화, 매핑 등을 미리 지원하고 synchronized 없이 병렬을 간단하게 지원한다.
```java
list.stream().filter(e->e.isHidden()).collect(toList()); // 순차
list.parallelStream().filter(e->e.isHidden()).collect(toList()); // 병렬
```


# 1.5 디폴트 메서드와 자바 모듈
디폴트 메서드는 주로 인터페이스 변경이 힘든 경우 추가, 삭제가 용이해서 기존의 것에서 변경이 필요할 때 유용하게 쓰일 수 있는 기능이다. 하지만 함수형 프로그래밍에서도 약간의 트릭을 이용해서 큰 효과를 볼 수 있도록 사용도 가능하다. (예. `andThen()`)



# 1.6 함수형 프로그래밍 아이디어
null예외를 피하게 도와주는 `Optional<T>` 클래스, 그리고 구조적 패턴 매칭 기법을 함수형 프로그래밍에서 아이디어를 얻었다.


# 1.7 마치며
- 기존의 자바는 멀티코어를 온전히 활용하기 어려우므로 스트림 API를 적극적으로 사용해서 컬렉션 관련 연산에서 병렬 실행을 사용하면 좋다.
- 자바 8부터 함수와 메서드는 일급객체로 값으로써 넘겨줄 수 있다.
- 스트림 API중 일부는 기존의 컬렉션에서 기능을 가져왔다